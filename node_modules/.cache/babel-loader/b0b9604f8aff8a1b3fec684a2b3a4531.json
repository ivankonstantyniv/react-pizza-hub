{"ast":null,"code":"import _objectSpread from\"C:/Users/bigba/Desktop/reactjs_projects/react-pizza/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createSlice}from'@reduxjs/toolkit';import{calcTotalPrice}from'../../utils/calcTotalPrice';import{getCartFromLS}from'../../utils/getCartFromLS';var _getCartFromLS=getCartFromLS(),cartItems=_getCartFromLS.cartItems,allPrice=_getCartFromLS.allPrice;var initialState={cartItems:cartItems,allPrice:allPrice};export var cartSlice=createSlice({name:'cart',initialState:initialState,reducers:{addItem:function addItem(state,action){var findItem=state.cartItems.find(function(obj){return obj.id===action.payload.id&&obj.type===action.payload.type&&obj.size===action.payload.size;});var obj=_objectSpread(_objectSpread({},action.payload),{},{count:1});if(findItem){findItem.count+=1;}else{state.cartItems.push(obj);}state.allPrice=calcTotalPrice(state.cartItems);},clearCart:function clearCart(state){state.cartItems=[];state.allPrice=0;},removeItem:function removeItem(state,action){var _action$payload=action.payload,id=_action$payload.id,type=_action$payload.type,size=_action$payload.size;var cleanedList=state.cartItems.filter(function(obj){return obj.id!==id||obj.type!==type||obj.size!==size;});state.cartItems=cleanedList;state.allPrice=calcTotalPrice(state.cartItems);},incrementItemCount:function incrementItemCount(state,action){var _action$payload2=action.payload,id=_action$payload2.id,count=_action$payload2.count,type=_action$payload2.type,size=_action$payload2.size;var item=state.cartItems.find(function(obj){return obj.id===id&&obj.count===count&&obj.type===type&&obj.size===size;});item&&(item.count+=1);state.allPrice=calcTotalPrice(state.cartItems);},decrementItemCount:function decrementItemCount(state,action){var _action$payload3=action.payload,id=_action$payload3.id,count=_action$payload3.count,type=_action$payload3.type,size=_action$payload3.size;var item=state.cartItems.find(function(obj){return obj.id===id&&obj.count===count&&obj.type===type&&obj.size===size;});if(item&&item.count>1){item.count-=1;}state.allPrice=calcTotalPrice(state.cartItems);}}});export var selectCartItems=function selectCartItems(state){return state.cart.cartItems;};var _cartSlice$actions=cartSlice.actions,addItem=_cartSlice$actions.addItem,clearCart=_cartSlice$actions.clearCart,incrementItemCount=_cartSlice$actions.incrementItemCount,decrementItemCount=_cartSlice$actions.decrementItemCount,removeItem=_cartSlice$actions.removeItem;export{addItem,clearCart,incrementItemCount,decrementItemCount,removeItem};export default cartSlice.reducer;","map":{"version":3,"names":["createSlice","calcTotalPrice","getCartFromLS","cartItems","allPrice","initialState","cartSlice","name","reducers","addItem","state","action","findItem","find","obj","id","payload","type","size","count","push","clearCart","removeItem","cleanedList","filter","incrementItemCount","item","decrementItemCount","selectCartItems","cart","actions","reducer"],"sources":["C:/Users/bigba/Desktop/reactjs_projects/react-pizza/src/redux/slices/cartSlice.ts"],"sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { calcTotalPrice } from '../../utils/calcTotalPrice';\r\nimport { getCartFromLS } from '../../utils/getCartFromLS';\r\nimport { RootState } from '../store';\r\n\r\nexport type ItemType = {\r\n  id: string;\r\n  imageUrl: string;\r\n  name: string;\r\n  type: string;\r\n  size: number;\r\n  count: number;\r\n  price: number;\r\n}\r\n\r\ninterface CartSliceType {\r\n  cartItems: ItemType[];\r\n  allPrice: number;\r\n}\r\n\r\nconst {cartItems, allPrice} = getCartFromLS();\r\n\r\nconst initialState: CartSliceType = {\r\n  cartItems,\r\n  allPrice,\r\n};\r\n\r\nexport const cartSlice = createSlice({\r\n  name: 'cart',\r\n  initialState,\r\n  reducers: {\r\n    addItem: (state, action: PayloadAction<ItemType>) => {\r\n      const findItem = state.cartItems.find(\r\n        (obj) =>\r\n          obj.id === action.payload.id &&\r\n          obj.type === action.payload.type &&\r\n          obj.size === action.payload.size,\r\n      );\r\n\r\n      const obj = { ...action.payload, count: 1 };\r\n\r\n      if (findItem) {\r\n        findItem.count += 1;\r\n      } else {\r\n        state.cartItems.push(obj);\r\n      }\r\n\r\n      state.allPrice = calcTotalPrice(state.cartItems);\r\n    },\r\n    clearCart: (state) => {\r\n      state.cartItems = [];\r\n      state.allPrice = 0;\r\n    },\r\n    removeItem: (state, action: PayloadAction<ItemType>) => {\r\n      const { id, type, size } = action.payload;\r\n\r\n      const cleanedList = state.cartItems.filter(\r\n        (obj) => obj.id !== id || obj.type !== type || obj.size !== size,\r\n      );\r\n\r\n      state.cartItems = cleanedList;\r\n\r\n      state.allPrice = calcTotalPrice(state.cartItems);\r\n    },\r\n    incrementItemCount: (state, action: PayloadAction<ItemType>) => {\r\n      const { id, count, type, size } = action.payload;\r\n      const item = state.cartItems.find(\r\n        (obj) => obj.id === id && obj.count === count && obj.type === type && obj.size === size,\r\n      );\r\n      item && (item.count += 1);\r\n\r\n      state.allPrice = calcTotalPrice(state.cartItems);\r\n    },\r\n    decrementItemCount: (state, action: PayloadAction<ItemType>) => {\r\n      const { id, count, type, size } = action.payload;\r\n      const item = state.cartItems.find(\r\n        (obj) => obj.id === id && obj.count === count && obj.type === type && obj.size === size,\r\n      );\r\n\r\n      if (item && item.count > 1) {\r\n        item.count -= 1\r\n      }\r\n\r\n      state.allPrice = calcTotalPrice(state.cartItems);\r\n    },\r\n  },\r\n});\r\n\r\nexport const selectCartItems = (state: RootState) => state.cart.cartItems;\r\n\r\nexport const { addItem, clearCart, incrementItemCount, decrementItemCount, removeItem } =\r\n  cartSlice.actions;\r\n\r\nexport default cartSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}